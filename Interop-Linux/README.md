# AUVSI SUAS 2020 FLU Interop Interface
Following the successful implementation of the 2019 System at the AUVSI SUAS competition, a new revision of the same system has been developed to optimise the uploading of objects, while also making implementation with the computer vision and Linux ground station considerably easier for the 2020 competition. Once complete, ideally, only one script will be required to be run, which will start the interop interface, interop server (if required for testing) and telemetry upload to the server. As of December 2019, these scripts are still in development.

**NOTE: These files, commands, scripts and functions will only run on a Linux-based operating system, and have been tested on Ubuntu 18.04.**

## Downloading the Interop System Code
In order to create a local copy of the github repository, run the following lines of code to install git and then clone the repository locally:  

`sudo apt-get install git`  
`git clone https://github.com/FlightLabsUNSW/FLU-AUVSI-Interop-System.git`  

You should then see the whole file structure in the 'FLU-AUVSI-Interop-System' folder in the home directory, and everything you need for this system is contained in these folders.

It is good practice to do this every time before you start working locally if you are editing files, to ensure you have the latest version.

## Setup & Installation Requirements
For ease of installation and setup on different computers, a startup/setup script has been developed, the 'flu-startup-system.sh' file. To be able to run the startup script, run the following lines of code from the root:  

`cd FLU-AUVSI-Interop-System/Interop-Linux`  
`chmod u+x ./bin/flu-startup-system.sh`  
`./bin/flu-startup-system.sh setup`  

The setup after the file path is extremely important to ensure the script runs the correct functions for setup of the server and running of the FLU Interop Interface.

## User Input Requirements
To easily collate user-generated information and not require constant re-inputting of data on every upload, the "mission-params.json" file is used. In this file, the following parameters can be configured:
- ID: Used for debugging only
- IP: Raw IP address of the interop server (i.e. 192.168.1.16)
- Mission ID: Mission ID given to the team (if unsure before comp, use 1)
- Port: Raw port of the interop server (i.e. 8000)
- Username & Password: Login details for the interop server
- Device IP: Full IP address (including port) for telemetry output from MAVProxy (i.e. 192.168.1.16:14550)
- Comport: Serial USB port where telemetry is going into the computer system (i.e. /dev/ttyUSB0)

These parameters must be updated prior to starting the system, and **MUST** be set by the user and are not automatically generated by the FLU interop system.

## Main Scripts
These scripts contain the main code bodies and function calling, and are named 'flu-main-******.sh' in the Interop-Linux bin folder. There are currently two main scripts.  
1. **flu-main-interop.sh** - Main code body associated with the interaction with the interop server. Includes uploading of objects and images, login process, extraction of mission details, and watching for files to come from the plane to the ground station.  
2. **flu-main-telemetry.sh** - Main code body associated with the upload of telemetry - still currently in progress and subject to further changes after testing of the telemetry system in 2020.

## Function Scripts
Description

## File Structure
Description

## Debugging
Description

## Source Control
If you are editing local files, instead of having to copy/paste or reupload files individually, git can be used to add, commit and push files directly to the master branch from local.

`cd FLU-AUVSI-Interop-System/Interop-Linux`  
`git add -a` **check all these code lines, do not use yet**  
`git commit`  

A screen will appear, prompting you to add a commit message, please make it concise and descriptive. When you are done, press Ctrl+X, type 'y', then press Enter to confirm the commit. To finish, run:  

`git push`  

You will be required to log in to push commits to the master branch, so be sure to have access to the FLU github and know your username and password. 

## Full System Testing
Description

### Setup and Starting Interop Server (Judging)
Description

### Accessing the Interop Server (Judging)
Description

### Adding, Editing and Viewing Mission Details (as a Judge)
Description

### Reviewing ODLCs
Description

### Viewing Live KMZ/KML Data (to be tested)
Description

### Mission Evaluation (Automated, to be tested)
Description
